---
- hosts: localhost
  remote_user: root
  roles:
    - role: ansible-role-php-fpm
      php_fpm_pools:
        # Adding and removing a pool with the default php version
        - name: website
          user: website
          group: website
          listen: 127.0.0.1:9000
        - name: website
          state: absent

        # Adding and removing a pool with php 7.0
        - name: website-php7
          user: website
          group: website
          listen: 127.0.0.1:9001
          version: "7.0"
        - name: website-php7
          version: "7.0"
          state: absent

        # Checking that php-fpm successfully restarts with pool using the default php version and php 7.0
        - name: website2
          user: website2
          group: website2
          listen: 127.0.0.1:9002
        - name: website2-php7
          user: website2
          group: website2
          version: "7.0"
          listen: 127.0.0.1:9003
